# =============================================================================
# RAILWAY DEPLOYMENT CONFIGURATION
# Spring Boot E-Commerce Application
# =============================================================================

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
server.port=${PORT:8080}
server.servlet.context-path=/
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024

# =============================================================================
# DATABASE CONFIGURATION - MONGODB ATLAS
# =============================================================================
spring.data.mongodb.uri=${mongodb+srv://dobhalsukrit_db_user:RckBdgicguKNW2wR@ecommerce-cluster.ft1cflk.mongodb.net/?retryWrites=true&w=majority&appName=ecommerce-cluster}
spring.data.mongodb.database=ecommerce_db

# MongoDB Connection Pool Settings
spring.data.mongodb.connection-pool.max-size=10
spring.data.mongodb.connection-pool.min-size=2
spring.data.mongodb.connection-pool.max-wait-time=10000ms
spring.data.mongodb.connection-pool.max-connection-idle-time=30000ms
spring.data.mongodb.connection-pool.max-connection-life-time=60000ms

# MongoDB Auto-indexing
spring.data.mongodb.auto-index-creation=true

# =============================================================================
# JWT SECURITY CONFIGURATION
# =============================================================================
jwt.secret=${JWT_SECRET:myDefaultSecretKeyForDevelopmentOnlyNotForProduction}
jwt.expiration=86400000
jwt.issuer=spring-boot-ecommerce
jwt.header=Authorization
jwt.prefix=Bearer

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
spring.web.cors.allowed-origins=${CORS_ORIGINS:https://localhost:3000,http://localhost:3000,https://sukritdobhal.com}
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,PATCH,OPTIONS
spring.web.cors.allowed-headers=*
spring.web.cors.allow-credentials=true
spring.web.cors.max-age=3600

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
logging.level.root=INFO
logging.level.com.ecommerce=INFO
logging.level.org.springframework.security=INFO
logging.level.org.springframework.data.mongodb=INFO
logging.level.org.springframework.web=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# =============================================================================
# SPRING BOOT ACTUATOR (HEALTH CHECKS)
# =============================================================================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
management.endpoint.health.show-components=always
management.health.mongo.enabled=true
management.health.diskspace.enabled=true

# =============================================================================
# PRODUCTION OPTIMIZATIONS
# =============================================================================
# Disable unnecessary features for production
spring.jpa.show-sql=false
spring.thymeleaf.cache=true
spring.resources.cache.cachecontrol.max-age=31536000
spring.resources.chain.cache=true

# Jackson JSON Configuration
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.serialization.indent-output=false
spring.jackson.default-property-inclusion=NON_NULL

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# Disable unnecessary security features for API-only application
spring.security.require-ssl=false
server.servlet.session.cookie.secure=false
server.servlet.session.cookie.http-only=true
server.servlet.session.timeout=30m

# =============================================================================
# ERROR HANDLING
# =============================================================================
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=on_param
server.error.include-exception=false

# =============================================================================
# APPLICATION SPECIFIC CONFIGURATION
# =============================================================================
# Business Configuration
app.business.inventory.auto-update=true
app.business.pricing.dynamic-enabled=true
app.business.discount.max-rate=0.50

# Order Configuration
app.orders.auto-confirm=false
app.orders.max-items=50

# User Configuration
app.users.default-role=CUSTOMER
app.users.registration.enabled=true

# =============================================================================
# DEVELOPMENT vs PRODUCTION PROFILES
# =============================================================================
# This file is specifically for Railway production environment
spring.profiles.active=railway

# =============================================================================
# RAILWAY SPECIFIC SETTINGS
# =============================================================================
# Railway Environment Variables (set in Railway dashboard):
# MONGODB_URI=mongodb+srv://user:pass@cluster.mongodb.net/ecommerce_db
# JWT_SECRET=your-secure-jwt-secret-key
# CORS_ORIGINS=https://yourusername.github.io
# SPRING_PROFILES_ACTIVE=railway

# =============================================================================
# TIMEZONE AND LOCALE
# =============================================================================
spring.jackson.time-zone=UTC
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true

# =============================================================================
# THREAD POOL CONFIGURATION
# =============================================================================
server.tomcat.threads.max=50
server.tomcat.threads.min-spare=10
server.tomcat.max-connections=2000
server.tomcat.accept-count=100
server.tomcat.connection-timeout=20000

# =============================================================================
# MEMORY AND PERFORMANCE TUNING
# =============================================================================
# These work in conjunction with Railway environment variables:
# JAVA_TOOL_OPTIONS=-Xmx512m -Xss256k -XX:MaxMetaspaceSize=128m
# MAVEN_OPTS=-Xmx1024m

# =============================================================================
# API RATE LIMITING (if implemented)
# =============================================================================
app.api.rate-limit.enabled=true
app.api.rate-limit.requests-per-minute=100

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
spring.cache.type=simple
spring.cache.cache-names=products,users,orders

# =============================================================================
# VALIDATION CONFIGURATION  
# =============================================================================
spring.validation.add-validation-constraints=true

# =============================================================================
# END OF CONFIGURATION
# =============================================================================
